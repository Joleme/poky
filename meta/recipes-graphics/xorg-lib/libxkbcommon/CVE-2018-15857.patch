From 356eb67635390e04a7da218f3b1aac700b250b3e Mon Sep 17 00:00:00 2001
From: Peter Hutterer <peter.hutterer@who-t.net>
Date: Mon, 30 Jul 2018 14:11:46 +1000
Subject: [PATCH] xkbcomp: fix pointer value for FreeStmt

Upstream-Status: Backport (https://github.com/xkbcommon/libxkbcommon/commit/c1e5ac16e77a21f87bdf3bc4dea61b037a17dddb)
CVE: CVE-2018-15857

Signed-off-by: Peter Hutterer <peter.hutterer@who-t.net>
Signed-off-by: Rahul Chauhan <rahulk@mvista.com>
---
 src/xkbcomp/ast-build.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/xkbcomp/ast-build.c b/src/xkbcomp/ast-build.c
index 7fd92a6..07bf9d3 100644
--- a/src/xkbcomp/ast-build.c
+++ b/src/xkbcomp/ast-build.c
@@ -235,7 +235,7 @@ ExprAppendMultiKeysymList(ExprDef *expr, ExprDef *append)
     darray_steal(append->keysym_list.syms, &syms, NULL);
     darray_append_items(expr->keysym_list.syms, syms, numEntries);

-    FreeStmt((ParseCommon *) &append);
+    FreeStmt((ParseCommon *) append);

     return expr;
 }
--
2.7.4
